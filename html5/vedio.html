<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>学习HTML HTML5</title>
</head>
<body>



    <video id="vedio" width="1280" height="720" controls="controls"  >
        <source src="../resource/vedio/平凡人的奥林匹克-花甲背包客.mp4">
    </video>


    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded",init,false);
        
        function init(){
            console.log("document rendered, ready.")

            var vedio = document.getElementById("vedio")
            console.log("vedio widht:",vedio.width,"vedio height:",vedio.height)
            console.log("vedion duration:",vedio.duration,"volume:",vedio.volume)
        }

        var vedio = document.getElementById("vedio")
        
        if (vedio.canPlayType) {   // tests that we have HTML5 video support
            console.log("current broswer suport html5 vedio")

            // 事件通知何时视频加载内容已足够用于开始播放
            vedio.addEventListener("canplay",canPlay)

            // 事件来确定视频有多长。 当 video 对象获取有关内容的足够信息以了解持续时间后，引发 onloadedmetadata 事件
            vedio.addEventListener("loadedmetadata",onLoadedMetadata)

            // 当 currentTime 属性发生更改时，引发 ontimeupdate 事件
            vedio.addEventListener("timeupdate",onTimeUpdate)

            vedio.addEventListener("play",onPlay)    
            vedio.addEventListener("pause",onPause)
            vedio.addEventListener("progress",onProgress)

            var vLen;

            function canPlay(){
                console.log("vedio can begin playing")
            }

            function onLoadedMetadata(){
                vLen = vedio.duration
                console.log("vedio length: ", vLen.toFixed(2) , " s")
            }

            function onTimeUpdate(){
                var curr = vedio.currentTime;
                console.log("current playing process: ",(curr*100/vLen).toFixed(2),"%")
            }

            function onPlay(){
                console.log("vedio beginning play.")
            }
            function onPause(){
                console.log("vedio paused. current progress:",vedio.currentTime)
            }

            function onProgress(){
                console.log("vedio progress: ",vedio.currentTime/vedio.duration)
            }
        }else{
            console.logo("html5 not supported")
        }
    </script>
    
</body>
</html>